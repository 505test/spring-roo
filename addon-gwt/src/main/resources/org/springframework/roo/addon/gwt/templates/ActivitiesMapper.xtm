package {{=packageName}};

import com.google.gwt.app.place.Activity;
import com.google.gwt.app.place.PlaceController;
import com.google.gwt.app.place.ProxyPlace;
import com.google.gwt.requestfactory.shared.EntityProxyId;
{{#imports}}import {{=import}};
{{/imports}}
/**
 * Maps {@link ProxyPlace} instances to the {@link Activity} to run.
 */
public class {{=className}} {
	private final {{=requestFactory}} requests;
	private final PlaceController placeController;

	public {{=className}}({{=requestFactory}} requests, PlaceController placeController) {
		this.requests = requests;
		this.placeController = placeController;
	}

	public Activity getActivity(ProxyPlace place) {
		switch (place.getOperation()) {
			case DETAILS:
				return new {{=detailsActivity}}((EntityProxyId<{{=proxy}}>)place.getProxyId(), requests, placeController);
			case EDIT:
				return new {{=editActivity}}((EntityProxyId<{{=proxy}}>)place.getProxyId(), requests, placeController);
			case PERSIST:
      			return new {{=editActivity}}(null, requests, placeController);
		}

		throw new IllegalArgumentException("Unknown operation " + place.getOperation());
	}
}
